// --- PREGUNTAS ---
const preguntas = [
  {
  texto: "En quin any es va fundar el Club de Roma?",
  opciones: [
    "a) 1960",
    "b) 1968",
    "c) 1973",
    "d) 1987"
  ],
  correcta: "b"
},
{
  texto: "Quin informe va publicar el Club de Roma?",
  opciones: [
    "a) Informe Brundtland",
    "b) Informe Meadows",
    "c) Agenda 21",
    "d) Protocol de Kyoto"
  ],
  correcta: "b"
},
{
  texto: "Quin any es va celebrar el primer Dia de la Terra?",
  opciones: [
    "a) 1965",
    "b) 1970",
    "c) 1980",
    "d) 1992"
  ],
  correcta: "b"
},
{
  texto: "Quina ag√®ncia es va crear arran del primer Dia de la Terra?",
  opciones: [
    "a) FAO",
    "b) ONU",
    "c) EPA",
    "d) UE"
  ],
  correcta: "c"
},
{
  texto: "Quin any es va aprovar el Primer Programa d‚ÄôAcci√≥ Comunit√†ria sobre el Medi Ambient?",
  opciones: [
    "a) 1968",
    "b) 1973",
    "c) 1980",
    "d) 1992"
  ],
  correcta: "b"
},
{
  texto: "Quin informe defineix per primera vegada el concepte de desenvolupament sostenible?",
  opciones: [
    "a) Informe Meadows",
    "b) Informe Brundtland",
    "c) Agenda 21",
    "d) Protocol de Kyoto"
  ],
  correcta: "b"
},
{
  texto: "On es va celebrar la Confer√®ncia de les Nacions Unides sobre Medi Ambient i Desenvolupament de 1992?",
  opciones: [
    "a) Kyoto",
    "b) Par√≠s",
    "c) Mont-real",
    "d) Rio de Janeiro"
  ],
  correcta: "d"
},
{
  texto: "Quin lema s‚Äôassocia a l‚ÄôAgenda 21?",
  opciones: [
    "a) Pensa global, actua local",
    "b) Salvem el planeta",
    "c) Creixement verd",
    "d) Futur sostenible"
  ],
  correcta: "a"
},
{
  texto: "Quin reglament europeu sobre medi ambient es va crear el 1995?",
  opciones: [
    "a) EMAS",
    "b) ISO 14000",
    "c) REACH",
    "d) Ecolabel"
  ],
  correcta: "a"
},
{
  texto: "Quan es van publicar les normes ISO 14000?",
  opciones: [
    "a) 1987",
    "b) 1996",
    "c) 2005",
    "d) 2015"
  ],
  correcta: "b"
},
{
  texto: "Quin √©s l‚Äôobjectiu principal del Protocol de Kyoto?",
  opciones: [
    "a) Reduir les emissions de gasos d‚Äôefecte hivernacle",
    "b) Eliminar els CFC",
    "c) Fomentar el reciclatge mundial",
    "d) Restaurar la capa d‚Äôoz√≥"
  ],
  correcta: "a"
},
{
  texto: "Quin pa√≠s va permetre que el Protocol de Kyoto entr√©s en vigor?",
  opciones: [
    "a) Estats Units",
    "b) R√∫ssia",
    "c) Xina",
    "d) Espanya"
  ],
  correcta: "b"
},
{
  texto: "En quin any va entrar en vigor el Protocol de Kyoto?",
  opciones: [
    "a) 1997",
    "b) 2000",
    "c) 2005",
    "d) 2012"
  ],
  correcta: "c"
},
{
  texto: "A quin percentatge de reducci√≥ global d‚Äôemissions aspirava el Protocol de Kyoto?",
  opciones: [
    "a) 2%",
    "b) 5%",
    "c) 8%",
    "d) 10%"
  ],
  correcta: "b"
},
{
  texto: "Quin any es va celebrar la Cimera Mundial sobre Desenvolupament Sostenible?",
  opciones: [
    "a) 2000",
    "b) 2002",
    "c) 2005",
    "d) 2015"
  ],
  correcta: "b"
},
{
  texto: "Quin acord internacional es va proposar el 2015 per limitar l‚Äôaugment de temperatura global?",
  opciones: [
    "a) Acord de Par√≠s",
    "b) Agenda 21",
    "c) Protocol de Montreal",
    "d) Confer√®ncia de Kyoto"
  ],
  correcta: "a"
},
{
  texto: "Quin √©s l‚Äôobjectiu principal de l‚ÄôAcord de Par√≠s?",
  opciones: [
    "a) Limitar l‚Äôaugment de temperatura global per sota dels 2¬∫C",
    "b) Eliminar els residus pl√†stics",
    "c) Reduir la contaminaci√≥ de l‚Äôaigua",
    "d) Fomentar l‚Äôeconomia circular"
  ],
  correcta: "a"
},
{
  texto: "Quin fenomen √©s causat per compostos que contenen clor i brom com els CFC?",
  opciones: [
    "a) Escalfament global",
    "b) Deteriorament de la capa d‚Äôoz√≥",
    "c) Eutrofitzaci√≥",
    "d) Acidificaci√≥"
  ],
  correcta: "b"
},
{
  texto: "En quin protocol es van prohibir els CFC?",
  opciones: [
    "a) Montreal",
    "b) Kyoto",
    "c) Par√≠s",
    "d) Rio"
  ],
  correcta: "a"
},
{
  texto: "Quina √©s una conseq√º√®ncia del deteriorament de la capa d‚Äôoz√≥?",
  opciones: [
    "a) C√†ncer de pell i cataractes",
    "b) Reducci√≥ del CO‚ÇÇ atmosf√®ric",
    "c) Disminuci√≥ de radiaci√≥ ultraviolada",
    "d) Augment de la pluja √†cida"
  ],
  correcta: "a"
},
{
  texto: "Qu√® √©s l‚Äôescalfament global?",
  opciones: [
    "a) Un proc√©s natural de refredament del planeta",
    "b) L‚Äôaugment gradual de la temperatura de la Terra causat per l‚Äôactivitat humana",
    "c) Una disminuci√≥ de la radiaci√≥ solar que arriba a la Terra",
    "d) L‚Äôaugment de l‚Äôalbedo terrestre"
  ],
  correcta: "b"
},
{
  texto: "Quin gas contribueix principalment a l‚Äôefecte hivernacle?",
  opciones: [
    "a) O‚ÇÇ",
    "b) N‚ÇÇ",
    "c) CO‚ÇÇ",
    "d) H‚ÇÇ"
  ],
  correcta: "c"
},
{
  texto: "Quina √©s una conseq√º√®ncia directa de l‚Äôescalfament global?",
  opciones: [
    "a) Descens del nivell del mar",
    "b) Increment de fen√≤mens meteorol√≤gics extrems",
    "c) Augment de la capa d‚Äôoz√≥",
    "d) Disminuci√≥ de la temperatura mitjana global"
  ],
  correcta: "b"
},
{
  texto: "Qu√® causa l‚Äôacidificaci√≥ del medi?",
  opciones: [
    "a) Emissions de CFC",
    "b) Emissions de SO‚ÇÇ i NOx",
    "c) Emissions de met√†",
    "d) Escalfament global"
  ],
  correcta: "b"
},
{
  texto: "Quina caracter√≠stica t√© la pluja √†cida?",
  opciones: [
    "a) T√© un pH alt (b√†sic)",
    "b) T√© un pH baix (√†cid)",
    "c) T√© un pH neutre (7)",
    "d) No afecta el medi natural"
  ],
  correcta: "b"
},
{
  texto: "Qu√® √©s l‚Äôeutrofitzaci√≥?",
  opciones: [
    "a) Acumulaci√≥ de nutrients en ecosistemes aqu√†tics",
    "b) Reducci√≥ del nivell de nutrients al s√≤l",
    "c) Generaci√≥ de smog urb√†",
    "d) Erosi√≥ del terreny"
  ],
  correcta: "a"
},
{
  texto: "Quina √©s una conseq√º√®ncia de l‚Äôeutrofitzaci√≥?",
  opciones: [
    "a) Augment de la biodiversitat",
    "b) Olor desagradable i p√®rdua de vida aqu√†tica",
    "c) Reducci√≥ de la pluja √†cida",
    "d) Disminuci√≥ de la temperatura de l‚Äôaigua"
  ],
  correcta: "b"
},
{
  texto: "Com s‚Äôanomena la boira contaminant formada per √≤xids i part√≠cules?",
  opciones: [
    "a) Smog",
    "b) Eutrofitzaci√≥",
    "c) Pluja √†cida",
    "d) Oz√≥ troposf√®ric"
  ],
  correcta: "a"
},
{
  texto: "Quins efectes provoca l‚Äôsmog en la salut humana?",
  opciones: [
    "a) Irritaci√≥ ocular i respirat√≤ria",
    "b) Hipot√®rmia",
    "c) Augment de la pressi√≥ arterial",
    "d) P√®rdua d‚Äôaudici√≥"
  ],
  correcta: "a"
},
{
  texto: "Qu√® √©s l‚Äôecotoxicitat?",
  opciones: [
    "a) Impacte de subst√†ncies qu√≠miques sobre els ecosistemes",
    "b) Contaminaci√≥ ac√∫stica",
    "c) Efecte hivernacle",
    "d) Increment de la radiaci√≥ solar"
  ],
  correcta: "a"
},
{
  texto: "Quins compostos contribueixen principalment a la toxicitat humana?",
  opciones: [
    "a) Metalls pesants i compostos org√†nics persistents (COP)",
    "b) Aigua destil¬∑lada i oxigen",
    "c) Gasos nobles i nitrogen",
    "d) Compostos arom√†tics vol√†tils naturals"
  ],
  correcta: "a"
},
{
  texto: "Quin √©s el gas m√©s greu em√®s pels abocadors?",
  opciones: [
    "a) Met√† (CH‚ÇÑ)",
    "b) Di√≤xid de carboni (CO‚ÇÇ)",
    "c) Oz√≥ (O‚ÇÉ)",
    "d) Di√≤xid de sofre (SO‚ÇÇ)"
  ],
  correcta: "a"
},
{
  texto: "Qu√® s√≥n els lixiviats?",
  opciones: [
    "a) L√≠quids que drenen dels abocadors i contaminen aig√ºes subterr√†nies",
    "b) Gasos de combusti√≥ industrial",
    "c) Compostos utilitzats per purificar l‚Äôaigua",
    "d) Part√≠cules s√≤lides reciclades"
  ],
  correcta: "a"
},
{
  texto: "Quina √©s una de les causes de l‚Äôesgotament dels recursos naturals?",
  opciones: [
    "a) Sobreconsum i √∫s excessiu de recursos no renovables",
    "b) Disminuci√≥ de la poblaci√≥ mundial",
    "c) Augment de la biodiversitat",
    "d) Creaci√≥ de reserves naturals"
  ],
  correcta: "a"
},
{
  texto: "Quina √©s una conseq√º√®ncia directa de la sobrepoblaci√≥?",
  opciones: [
    "a) Augment de la demanda de recursos naturals",
    "b) Disminuci√≥ del consum energ√®tic",
    "c) Millora de la qualitat de l‚Äôaire",
    "d) Reducci√≥ dels residus generats"
  ],
  correcta: "a"
},
{
  texto: "Quina d‚Äôaquestes NO √©s una causa de l‚Äôesgotament de recursos?",
  opciones: [
    "a) Sobreconsum",
    "b) Desenvolupament industrial",
    "c) Distribuci√≥ equitativa de recursos",
    "d) Sobrepoblaci√≥"
  ],
  correcta: "c"
},
{
  texto: "Quin any es van proposar els Objectius de Desenvolupament Sostenible (ODS)?",
  opciones: [
    "a) 2010",
    "b) 2012",
    "c) 2015",
    "d) 2020"
  ],
  correcta: "c"
},
{
  texto: "Quin any es va publicar el 8√® Programa d‚ÄôAcci√≥ Ambiental de la Uni√≥ Europea?",
  opciones: [
    "a) 2015",
    "b) 2020",
    "c) 2022",
    "d) 2024"
  ],
  correcta: "c"
},
{
  texto: "Quin √©s l‚Äôobjectiu clim√†tic de la Uni√≥ Europea per a l‚Äôany 2030 segons el 8√® Programa d‚ÄôAcci√≥ Ambiental?",
  opciones: [
    "a) Reduir les emissions un 25%",
    "b) Reduir les emissions un 55% respecte als nivells de 1990",
    "c) Reduir les emissions un 75%",
    "d) Neutralitat clim√†tica total"
  ],
  correcta: "b"
},
{
  texto: "Quin √©s l‚Äôobjectiu principal de la Uni√≥ Europea per a l‚Äôany 2050 segons el 8√® Programa d‚ÄôAcci√≥ Ambiental?",
  opciones: [
    "a) Aconseguir la neutralitat clim√†tica",
    "b) Reduir les emissions un 25%",
    "c) Eliminar tots els residus industrials",
    "d) Augmentar les emissions de CO‚ÇÇ per sobre del 1990"
  ],
  correcta: "a"
},
{
  texto: "Qui va dirigir l‚Äôinforme 'Els L√≠mits del Creixement' del Club de Roma?",
  opciones: [
    "a) Donella Meadows",
    "b) Rachel Carson",
    "c) Al Gore",
    "d) Jane Goodall"
  ],
  correcta: "a"
},
{
  texto: "Quina era la conclusi√≥ principal de l‚Äôinforme 'Els L√≠mits del Creixement'?",
  opciones: [
    "a) Que el creixement econ√≤mic il¬∑limitat no √©s sostenible a llarg termini",
    "b) Que els recursos naturals s√≥n infinits",
    "c) Que la contaminaci√≥ no tenia impacte significatiu",
    "d) Que el progr√©s tecnol√≤gic resol tots els problemes ambientals"
  ],
  correcta: "a"
},
{
  texto: "Quin any es va publicar l‚ÄôInforme Brundtland?",
  opciones: [
    "a) 1980",
    "b) 1987",
    "c) 1992",
    "d) 1997"
  ],
  correcta: "b"
},
{
  texto: "Com es titulava l‚ÄôInforme Brundtland de 1987?",
  opciones: [
    "a) El nostre futur com√∫",
    "b) Els l√≠mits del creixement",
    "c) Futur sostenible",
    "d) Un m√≥n verd"
  ],
  correcta: "a"
},
{
  texto: "Quin any es va celebrar la Cimera de la Terra a Rio de Janeiro?",
  opciones: [
    "a) 1987",
    "b) 1990",
    "c) 1992",
    "d) 2000"
  ],
  correcta: "c"
},
{
  texto: "Quin document va sorgir de la Cimera de Rio de 1992 per promoure el desenvolupament sostenible local?",
  opciones: [
    "a) L‚ÄôAgenda 21",
    "b) El Protocol de Kyoto",
    "c) L‚ÄôInforme Meadows",
    "d) L‚ÄôAcord de Par√≠s"
  ],
  correcta: "a"
},
{
  texto: "Quina √©s la frase associada a l‚ÄôAgenda 21?",
  opciones: [
    "a) Think global, act local",
    "b) Save the Earth",
    "c) One planet, one future",
    "d) Protect our nature"
  ],
  correcta: "a"
},
{
  texto: "En quin any es va aprovar el Primer Programa d‚ÄôAcci√≥ Ambiental de la Comunitat Europea?",
  opciones: [
    "a) 1973",
    "b) 1980",
    "c) 1987",
    "d) 1995"
  ],
  correcta: "a"
},
{
  texto: "Quin √©s l‚Äôobjectiu dels Programes d‚ÄôAcci√≥ Ambiental de la UE?",
  opciones: [
    "a) Establir les prioritats ambientals de la pol√≠tica europea per per√≠odes concrets",
    "b) Substituir la legislaci√≥ ambiental estatal",
    "c) Regular el comer√ß d‚Äôenergia renovable",
    "d) Controlar el mercat del CO‚ÇÇ"
  ],
  correcta: "a"
},
{
  texto: "Quan es va adoptar el Protocol de Kyoto?",
  opciones: [
    "a) 1992",
    "b) 1995",
    "c) 1997",
    "d) 2005"
  ],
  correcta: "c"
},
{
  texto: "Quin era l‚Äôobjectiu principal del Protocol de Kyoto?",
  opciones: [
    "a) Reduir les emissions de gasos d‚Äôefecte hivernacle",
    "b) Prohibir els aerosols",
    "c) Reduir la contaminaci√≥ ac√∫stica",
    "d) Promoure el comer√ß internacional"
  ],
  correcta: "a"
},
{
  texto: "Quan va entrar en vigor el Protocol de Kyoto?",
  opciones: [
    "a) 1997",
    "b) 2000",
    "c) 2005",
    "d) 2010"
  ],
  correcta: "c"
},
{
  texto: "Quin pa√≠s va permetre que el Protocol de Kyoto entr√©s en vigor en ratificar-lo?",
  opciones: [
    "a) Estats Units",
    "b) R√∫ssia",
    "c) Espanya",
    "d) Xina"
  ],
  correcta: "b"
},
{
  texto: "Quan es va signar l‚ÄôAcord de Par√≠s sobre el clima?",
  opciones: [
    "a) 2005",
    "b) 2012",
    "c) 2015",
    "d) 2018"
  ],
  correcta: "c"
},
{
  texto: "Quin √©s l‚Äôobjectiu principal de l‚ÄôAcord de Par√≠s (2015)?",
  opciones: [
    "a) Limitar l‚Äôaugment de la temperatura global per sota dels 2 ¬∞C",
    "b) Reduir el consum d‚Äôaigua potable",
    "c) Prohibir els combustibles f√≤ssils",
    "d) Controlar la contaminaci√≥ ac√∫stica"
  ],
  correcta: "a"
},
{
  texto: "Quina √©s la difer√®ncia principal entre el Protocol de Kyoto i l‚ÄôAcord de Par√≠s?",
  opciones: [
    "a) Kyoto establia objectius vinculants per pa√Øsos desenvolupats; Par√≠s fixa compromisos voluntaris per tots",
    "b) Kyoto tractava la biodiversitat; Par√≠s tracta nom√©s residus",
    "c) Par√≠s nom√©s s‚Äôaplica a la UE",
    "d) Kyoto √©s posterior a Par√≠s"
  ],
  correcta: "a"
},
{
  texto: "Quina √©s la causa principal de la problem√†tica ambiental actual?",
  opciones: [
    "a) El model de producci√≥ i consum insostenible",
    "b) L‚Äôaugment de la poblaci√≥ mundial",
    "c) El canvi clim√†tic natural",
    "d) La rotaci√≥ de la Terra"
  ],
  correcta: "a"
},
{
  texto: "Quin tipus de relaci√≥ hi ha entre desenvolupament econ√≤mic i medi ambient segons la visi√≥ cl√†ssica?",
  opciones: [
    "a) De conflicte, ja que el creixement sol generar m√©s pressi√≥ ambiental",
    "b) De complementarietat absoluta",
    "c) Cap relaci√≥ directa",
    "d) El medi ambient impulsa sempre el creixement"
  ],
  correcta: "a"
},
{
  texto: "Quin any es va crear el Programa de Nacions Unides per al Medi Ambient (PNUMA)?",
  opciones: [
    "a) 1970",
    "b) 1972",
    "c) 1980",
    "d) 1987"
  ],
  correcta: "b"
},
{
  texto: "Quin va ser el lema de la Confer√®ncia d‚ÄôEstocolm (1972)?",
  opciones: [
    "a) Only One Earth",
    "b) Think global, act local",
    "c) Save our planet",
    "d) Our common future"
  ],
  correcta: "a"
},
{
  texto: "Quin any es va celebrar la Cimera Mundial sobre Desenvolupament Sostenible a Johannesburg?",
  opciones: [
    "a) 1997",
    "b) 2000",
    "c) 2002",
    "d) 2005"
  ],
  correcta: "c"
},
{
  texto: "Quin va ser l‚Äôobjectiu principal de la Cimera de Johannesburg (2002)?",
  opciones: [
    "a) Revisar i refor√ßar l‚Äôaplicaci√≥ de l‚ÄôAgenda 21",
    "b) Reduir les emissions industrials",
    "c) Crear el Protocol de Kyoto",
    "d) Definir l‚ÄôAcord de Par√≠s"
  ],
  correcta: "a"
},
{
  texto: "Quin any es va aprovar el VI Programa d‚ÄôAcci√≥ Ambiental de la UE?",
  opciones: [
    "a) 1998",
    "b) 2001",
    "c) 2005",
    "d) 2010"
  ],
  correcta: "b"
},
{
  texto: "Quins eren els √†mbits prioritaris del VI Programa d‚ÄôAcci√≥ Ambiental?",
  opciones: [
    "a) Canvi clim√†tic, biodiversitat, medi ambient i salut, i recursos naturals",
    "b) Energia, transport, ind√∫stria i comer√ß",
    "c) Agricultura, pesca i turisme",
    "d) Innovaci√≥, digitalitzaci√≥ i economia"
  ],
  correcta: "a"
},
{
  texto: "Quina √©s la durada del VI Programa d‚ÄôAcci√≥ Ambiental de la UE?",
  opciones: [
    "a) 2001‚Äì2010",
    "b) 2005‚Äì2015",
    "c) 1990‚Äì2000",
    "d) 2012‚Äì2020"
  ],
  correcta: "a"
},
{
  texto: "Quin √©s el t√≠tol del VII Programa d‚ÄôAcci√≥ Ambiental de la UE?",
  opciones: [
    "a) Viure b√© dins els l√≠mits del nostre planeta",
    "b) Un futur com√∫ sostenible",
    "c) Europa 2030 verda",
    "d) Medi ambient i progr√©s econ√≤mic"
  ],
  correcta: "a"
},
{
  texto: "Quin any va comen√ßar el Pacte Verd Europeu (Green Deal)?",
  opciones: [
    "a) 2015",
    "b) 2019",
    "c) 2020",
    "d) 2022"
  ],
  correcta: "b"
},
{
  texto: "Quin principi ambiental estableix que 'qui contamina, paga'?",
  opciones: [
    "a) Principi de responsabilitat ambiental",
    "b) Principi de precauci√≥",
    "c) Principi de subsidiarietat",
    "d) Principi de correcci√≥ en origen"
  ],
  correcta: "a"
},
{
  texto: "Quin principi promou actuar abans que hi hagi danys irreversibles al medi?",
  opciones: [
    "a) Principi de precauci√≥",
    "b) Principi de recuperaci√≥",
    "c) Principi de reparaci√≥",
    "d) Principi de subsidiarietat"
  ],
  correcta: "a"
}
];
// --- FRASES DE √ÅNIMO ---
const frases_animo = [
¬† "¬°Muy bien! üòé",
¬† "¬°Eso es, perfecto, te camelo caramelo! üî•",
¬† "¬°Ole t√∫ huevos! üí™",
¬† "¬°Exacto, est√°s on fire! üöÄ",
¬† "¬°Qu√© m√°quina eres! üòç",
¬† "¬°Correcto, as√≠ se hace! üëè",
¬† "¬°Te lo sabes de memoria ya! üí•"
];

// --- VARIABLES ---
let i = 0;
let puntuacion = 0;
let preguntasParaEsteTest = [];

// --- FUNCIONES ---

/**
 * Baraja un array aleatoriamente (algoritmo Fisher-Yates).
 * @param {Array} array El array a barajar.
 */
function barajarPreguntas(array) {
  let currentIndex = array.length,  randomIndex;

  while (currentIndex != 0) {
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;
    [array[currentIndex], array[randomIndex]] = [
      array[randomIndex], array[currentIndex]];
  }
  return array;
}

/**
 * Muestra un mensaje en el chat.
 * @param {string} texto El contenido del mensaje.
 * @param {string} tipo 'bot' o 'user'.
 */
function mostrarMensaje(texto, tipo) {
¬† const chat = document.getElementById("chat");
¬† const msg = document.createElement("div");
¬† msg.classList.add("message", tipo);
  // Convierte los saltos de l√≠nea (\n) en etiquetas <br>
¬† msg.innerHTML = texto.replace(/\n/g, "<br>");
¬† chat.appendChild(msg);
¬† chat.scrollTop = chat.scrollHeight;
}

/**
 * Muestra la pregunta actual y sus opciones en un solo mensaje.
 */
function mostrarPregunta() {
  // Usa el array de 20 preguntas
¬† if (!preguntasParaEsteTest[i]) return;

¬† const p = preguntasParaEsteTest[i];
  // Une la pregunta y las opciones en un solo texto
¬† const textoCompleto = `${p.texto}\n\n${p.opciones.join("\n")}`;
¬† mostrarMensaje(textoCompleto, "bot");
}

/**
 * Procesa la respuesta del usuario.
 * @param {string} opcionElegida "a", "b", "c" o "d".
 */
function responder(opcionElegida) {
  // Usa el array de 20 preguntas
¬† if (!preguntasParaEsteTest[i]) return;

¬† const p = preguntasParaEsteTest[i];
  // Muestra solo la letra, como pediste
¬† mostrarMensaje(`${opcionElegida.toUpperCase()}`, "user");

¬† if (opcionElegida === p.correcta) {
¬† ¬† puntuacion++;
¬† ¬† mostrarMensaje(frases_animo[Math.floor(Math.random() * frases_animo.length)], "bot");
¬† } else {
¬† ¬† mostrarMensaje(`‚ùå Incorrecto. La respuesta correcta era ${p.correcta.toUpperCase()}.`, "bot");
¬† }

¬† i++;
  // Comprueba si quedan preguntas en el array de 20
¬† if (i < preguntasParaEsteTest.length) {
¬† ¬† setTimeout(mostrarPregunta, 800);
¬† } else {
¬† ¬† setTimeout(() => {
      // Muestra la puntuaci√≥n final sobre 20 (o el total que haya)
¬† ¬† ¬† mostrarMensaje(`üèÅ Has acertado ${puntuacion} de ${preguntasParaEsteTest.length} preguntas. üí°`, "bot");
¬† ¬† ¬† desactivarBotones();
¬† ¬† }, 800);
¬† }
}

/**
 * Desactiva los botones de opci√≥n al final del test.
 */
function desactivarBotones() {
¬† document.querySelectorAll(".btn-opcion").forEach(btn => btn.disabled = true);
}

// --- ARRANQUE ---
document.addEventListener("DOMContentLoaded", () => {
¬† i = 0;
¬† puntuacion = 0;
  
  // 1. Barajamos TODO el array de preguntas
  barajarPreguntas(preguntas); 
  
  // 2. Nos quedamos solo con las 20 primeras (o menos, si el array es m√°s corto)
  preguntasParaEsteTest = preguntas.slice(0, 20); 

¬† mostrarMensaje(`üß† Bienvenido al test. Se han elegido ${preguntasParaEsteTest.length} preguntas al azar. üí¨`, "bot");
¬† setTimeout(mostrarPregunta, 500);

¬† document.getElementById("btnA").onclick = () => responder("a");
¬† document.getElementById("btnB").onclick = () => responder("b");
¬† document.getElementById("btnC").onclick = () => responder("c");
¬† document.getElementById("btnD").onclick = () => responder("d");
});





